<h2>ðŸ“… Course Calendar </h2>

<div *ngIf="loading">Loading calendars...</div>

<div class="calendar">
  <div class="calendar-header">
    <button (click)="prevMonth()">â€¹</button>
    <h3>{{ currentMonth | date : "MMMM yyyy" }}</h3>
    <button (click)="nextMonth()">â€º</button>
  </div>

  <div class="calendar-grid">
    <div class="day-name" *ngFor="let d of dayNames">{{ d }}</div>

    <div
      class="day-cell"
      *ngFor="let day of monthDays"
      [class.other-month]="!day.inCurrentMonth"
      [class.course-day]="getCoursesForDate(day.date).length > 0"
      (click)="onDateSelected(day.date)"
    >
      <span class="day-number">{{ day.date.getDate() }}</span>

      <!-- Show course labels -->
      <div class="course-labels" *ngIf="getCoursesForDate(day.date).length > 0">
        <span
          class="course-label"
          *ngFor="let c of getCoursesForDate(day.date)"
          [title]="c.course?.courseName + ' (' + (c.batches?.[0]?.batchName || 'No Batch') + ')'">
          {{ c.course?.courseName }}
        </span>
      </div>
    </div>
  </div>
</div>

<!-- Always visible details (not pushed down) -->
<!-- course details at bottom -->
<div *ngIf="selectedCourses.length > 0" class="course-details floating-box">
  <h3>ðŸ“– Courses on {{ selectedDate | date : "mediumDate" }}</h3>
  <ul>
    <li *ngFor="let c of selectedCourses">
      <strong>{{ c.course?.courseName }}</strong>

      <ul>
        <li *ngFor="let b of c.batches">
          Batch: {{ b.batchName }}  
          <small> (Created: {{ b.createdOn | date:'shortDate' }}) </small>
        </li>
        <li *ngIf="!c.batches || c.batches.length === 0">
          No batches assigned
        </li>
      </ul>

      <small>
        {{ c.startDate | date:'shortDate' }} â†’ {{ c.endDate | date:'shortDate' }}
      </small>
    </li>
  </ul>
</div>

